# Open Specification

This document captures the current expectations for the AI Text Detector Streamlit app based on prior collaboration.

## Purpose

Provide a lightweight, explainable detector that estimates whether a passage is AI-generated by combining stylometric heuristics with optional GPT-2 perplexity, wrapped in an easy-to-use Streamlit interface.

## Functional requirements

- Accept pasted text input and optionally load preset sample texts from the sidebar.
- Toggle GPT-2 perplexity on/off; when unavailable, fall back gracefully to heuristics.
- Produce a result dictionary with `probability`, `label` (`Likely AI`/`Unclear`/`Likely Human`), and a `breakdown` including raw features, component scores, and GPT-2 perplexity (or `None` when skipped).
- Display the breakdown in the UI with features and weighted parts; show suggested prompt templates for users.
- Maintain sidebar state: last verdict metric, run options, sample loader, clear action, and cheat-sheet explainer.

## Non-functional requirements

- Keep dependencies minimal; GPT-2 stack (`torch`, `transformers`) is optional.
- Support local and Streamlit Cloud deployment without additional services.
- Favor transparency: expose intermediate scores and feature values instead of only a binary label.
- ASCII-only UI strings to avoid encoding issues in Windows consoles.

## Architecture highlights

- `detector.py` handles feature extraction, GPT-2 loading (lazy, device-aware), perplexity computation with sliding window masking, heuristic weighting, and label mapping.
- `app.py` manages Streamlit layout, session state for inputs/options, sidebar helper widgets, and rendering of detection results.
- Documentation lives in `README.md` (usage/deployment) and `docs/ARCHITECTURE.md` (design and extensibility).

## Acceptance criteria

- App launches via `streamlit run app.py` and renders sidebar controls, main textarea, detect button, and results sections.
- Detect function returns structured output without raising exceptions on empty input or when GPT-2 is unavailable.
- Sidebar presets populate the main editor; clear action resets text and last verdict; last verdict metric reflects the most recent run.
- Repository builds without syntax errors (`py -m compileall app.py detector.py`) and commits are pushed to `origin/main`.

## Future considerations

- Optional model selector for smaller transformers.
- Add automated tests for heuristics and mocked GPT-2 scoring.
- Allow caching of perplexity results for repeated inputs.
